# A-Player Evaluations - Product Requirements Document (PRD)

## What is a PRD?

A Product Requirements Document (PRD) is a comprehensive document that outlines the purpose, features, functionality, and behavior of a product. It serves as a blueprint for development teams, stakeholders, and product managers to understand what needs to be built, why it's being built, and how it should function. The PRD bridges the gap between business objectives and technical implementation by clearly defining user needs, success metrics, and feature specifications.

## Product Name

**A-Player Evaluations**

## Product Objective

A-Player Evaluations is a data visualization dashboard designed to display quarterly employee evaluation data stored in Supabase. The dashboard provides managers with comprehensive views of 360-degree feedback data, combining evaluations from managers, peers, and self-assessments across 10 standardized performance attributes. AI-powered analysis is performed externally via n8n workflows, with results displayed in the dashboard.

### Primary Goals

- **Visualize evaluation data** stored in Supabase through interactive charts and dashboards
- **Display AI analysis results** generated by external n8n workflows
- **Provide managers with actionable insights** through data visualization and reporting
- **Present weighted, multi-source feedback** in an easy-to-understand format
- **Show automated analysis results** including bias detection and development recommendations

### Success Metrics

- Quarterly evaluation completion rates across all employee levels
- Manager adoption and engagement with the dashboard analytics
- Reduction in evaluation bias through AI analysis
- Time savings in performance review processes
- Employee development plan creation and implementation rates

## Core Features (MVP)

### 1. Manager Authentication System

Secure login page integrated with Supabase authentication, allowing managers to access the employee evaluation dashboard based on their authorization level and department responsibilities.

### 2. Employee Selection Page

Dedicated page with intuitive interface enabling managers to select employees under their supervision for evaluation viewing, with search functionality and alphabetical organization. When an employee is selected, the Employee Analytics Display page opens as a modal or new view.

### 3. Employee Analytics Display Page

Comprehensive dashboard page displaying all evaluation data and analysis for the selected employee with quarter filtering capabilities and the following layout:

#### 3a. Quarter Filter Controls
Interactive quarter selection interface allowing managers to:
- Filter all displayed data by specific quarters
- Select quarter ranges for historical analysis
- Toggle between individual quarters and multi-quarter comparisons

#### 3b. Employee Profile Header
Left-aligned employee information pulled from Supabase:
- Employee name
- Role/position
- Department
- Email address

#### 3c. Radar Chart Display
Visual representation positioned to the right of the profile information, displaying total weighted attribute scores across all 10 performance attributes for the selected quarter(s) in an easy-to-interpret radar chart format.

#### 3d. Clustered Bar Chart Visualization
Interactive data visualization displaying weighted score breakdown for the selected quarter, showing final attribute weighted scores broken down per attribute, per evaluation source:
- **Manager Evaluations** (55% weight)
- **Peer Evaluations** (35% weight) 
- **Self Evaluations** (10% weight)

Shows individual source data (peer vs. manager vs. employee) as clustered bars alongside calculated weighted final results for each of the 10 performance attributes:
- Communication, Leadership, Technical Skills, Collaboration, Problem Solving, Initiative, Reliability, Innovation, Quality Focus, Adaptability

#### 3e. Quarterly Performance Trend Analysis
Time-series line chart displaying employee development over time based on final weighted scores, with selectable beginning and ending quarters, allowing managers to track performance trajectories across multiple evaluation periods.

#### 3f. Historical Clustered Bar Chart
Historical visualization displaying weighted attribute score breakdown across a selected range of quarters, enabling managers to compare attribute performance evolution over time with the same clustered bar format as the current quarter view.

#### 3g. AI Meta-Analysis Generation
Interactive AI analysis generation system with the following workflow:
- **"Generate Meta-Analysis" button** positioned at the bottom of the page
- When clicked, fetches webhook URL from app_config table (key: "n8n_webhook_url")
- Triggers webhook to n8n with quarter ID and evaluatee ID from Supabase
- n8n performs external AI analysis (bias detection, cross-evaluator comparison, development recommendations)
- Results automatically display in PDF viewer at bottom of page upon completion
- **AI analysis is specific to the currently selected quarter data only**

**Technical Implementation:**
- Web app queries app_config table for webhook URL using key "n8n_webhook_url"
- Webhook payload: `{ quarterId: string, evaluateeId: string }`
- Target endpoint: Retrieved from app_config.value for runtime configuration flexibility

#### 3h. AI Analysis Results Display (PDF Viewer)
Integrated PDF viewer interface positioned at the bottom of the page that:
- Displays AI meta-analysis results after generation
- Allows PDF download functionality
- Shows analysis specific to the selected quarter and employee
- Remains hidden until "Generate Meta-Analysis" is triggered

#### 3i. Page Analytics Download
**"Download Analytics View" button** allowing managers to download the entire current analytics page view as a comprehensive report, including all charts, data, and employee information currently displayed.

#### 3j. Weighted Score Calculation Backend
Supabase backend development to calculate weighted final results using the established formula (Manager 55% + Peer 35% + Self 10%) and store these computed scores in the weighted_evaluation_scores table for dashboard display across all visualization components and quarter ranges.

**Data Flow:**
- Raw evaluation data stored in submissions and attribute_scores tables
- Weighted calculations performed and stored in weighted_evaluation_scores table
- Dashboard queries weighted_evaluation_scores for optimized performance
- Configuration values (webhook URLs) retrieved from app_config table

## Planned Future Features

### Phase 2 Enhancements

- **Manager Notes System**: Interface allowing managers to add contextual notes and observations for individual employees, providing additional qualitative insights beyond numerical evaluations
- **Comprehensive PDF Report Generation**: Automated quarterly overview PDF downloads with executive summaries and detailed performance breakdowns
- **Overall A-Player Score Display**: Enhancement to employee selection page showing overall evaluation scores for quick performance overview
- **Advanced Employee Search**: Enhanced employee listing with search functionality and overall scores displayed alongside profile names for improved navigation

### Phase 3 Expansions

- **Employee Self-Access Portal**: Dedicated interface allowing employees to view their own evaluation results, development recommendations, and progress tracking
- **Manager Notes Analytics**: AI analysis of manager notes to identify patterns, sentiment trends, and development themes across employees
- **Advanced Analytics Dashboard**: Executive-level analytics with department comparisons, performance trend predictions, and organizational insights
- **Mobile Application**: Native mobile app for on-the-go evaluation access and notifications
- **Integration Capabilities**: API connections with existing HR systems, Slack notifications, and calendar integrations
- **Advanced Reporting**: Custom report builder with filtering, export options, and stakeholder-specific views

## Resources Available

### Human Resources

- Technical development team with React/TypeScript expertise
- Product manager for feature prioritization and stakeholder coordination
- UX/UI designer for user interface optimization
- DevOps engineer for deployment and infrastructure management

### Financial Resources

- Allocated budget for third-party service integrations (OpenAI, PDFShift, Supabase)
- Infrastructure costs for hosting and database operations
- Ongoing maintenance and support budget

### Existing Infrastructure

- **Database**: Established PostgreSQL schema via Supabase with complete evaluation data structure
- **Authentication**: Supabase authentication system ready for integration
- **Automation Platform**: n8n instance configured for workflow automation
- **AI Services**: OpenAI GPT-4 access for analysis and insights
- **PDF Generation**: PDFShift service for report creation

## Frontend Requirements and Resources

### Technology Stack

- **Framework**: React 18 with TypeScript for type-safe, modern development
- **Styling**: Tailwind CSS utility-first framework for rapid UI development
- **Charts**: Recharts library for data visualization and interactive charts
- **State Management**: React hooks and context for application state
- **Routing**: React Router for navigation and page management

### Frontend Resources Available

- **Documentation Access**: Complete documentation for React 18, TypeScript, and Tailwind CSS
- **Design System**: Established Tailwind CSS configuration and reusable component library
- **Development Environment**: Vite build tool for fast development and hot reloading
- **Code Quality**: ESLint and Prettier configuration for consistent code standards
- **Testing Framework**: Jest and React Testing Library for component testing

### UI/UX Requirements

- **Responsive Design**: Mobile-first approach with desktop optimization
- **Accessibility**: WCAG 2.1 AA compliance for enterprise accessibility standards
- **Performance**: Sub-3-second load times with optimized bundle sizes
- **Browser Support**: Modern browsers (Chrome, Firefox, Safari, Edge)
- **Interactive Elements**: Smooth animations and transitions for enhanced user experience

## Backend Requirements and Resources

### Infrastructure Stack

- **Database**: Supabase (PostgreSQL) with established schema including:
  - **weighted_evaluation_scores** table for pre-calculated weighted performance data
  - **app_config** table for runtime configuration management (webhook URLs, environment settings)
  - **evaluation_cycles** table for quarterly management
  - **people** table for employee data and organizational structure
  - **submissions** table for evaluation data storage
  - **attribute_scores** table for performance scoring
  - **attribute_responses** table for detailed feedback tracking

#### Database Schema Details:

**app_config table structure:**
```json
{
  "id": 1,
  "key": "n8n_webhook_url",
  "value": "https://kolbesmith.app.n8n.cloud/webhook-test/Generate PDF",
  "environment": "production",
  "created_at": "2025-07-15 16:40:17.398466"
}
```

**weighted_evaluation_scores table fields:**
- evaluatee_id, evaluatee_name, quarter_id, quarter_name, quarter_start_date, quarter_end_date
- attribute_name, manager_score, peer_score, self_score, weighted_final_score
- has_manager_eval, has_peer_eval, has_self_eval, completion_percentage

### Backend Resources Available

- **Database Access**: Supabase project configured at https://tufjnccktzcbmaemekiz.supabase.co
- **Authentication**: Supabase Auth with role-based access control
- **Real-time Updates**: Supabase subscriptions for live data synchronization
- **API Layer**: Supabase auto-generated APIs with TypeScript support
- **File Storage**: Supabase storage for document and asset management

### Automation and Integration

- **Workflow Engine**: n8n for external AI analysis processing and webhook handling
- **AI Processing**: OpenAI GPT-4 integration via n8n workflows for bias detection and performance analysis
- **PDF Generation**: PDFShift service integrated through n8n for automated report creation
- **Email Delivery**: n8n-managed email system for AI analysis result distribution
- **Webhook Architecture**: n8n webhook endpoints for triggering external AI analysis processes
- **Data Flow**: Dashboard displays results from AI analysis performed in n8n workflows

#### Webhook Integration Details:
- **Individual Meta-Analysis Endpoint**: Retrieved from app_config table (key: "n8n_webhook_url")
- **Current Production URL**: https://kolbesmith.app.n8n.cloud/webhook-test/Generate PDF
- **Payload Structure**: `{ quarterId: string, evaluateeId: string }`
- **Configuration Management**: Runtime webhook URL retrieval from app_config for environment flexibility
- **Response Handling**: PDF results displayed in integrated viewer with download capability

### Security and Compliance

- **Data Encryption**: End-to-end encryption for sensitive employee data
- **Access Controls**: Role-based permissions with manager-level restrictions
- **Audit Logging**: Comprehensive logging for evaluation access and modifications
- **Backup Strategy**: Automated daily backups with point-in-time recovery
- **GDPR Compliance**: Data privacy controls and employee data rights management

### Performance Requirements

- **Scalability**: Support for 1000+ employees with concurrent access
- **Response Time**: Sub-500ms API response times for dashboard queries
- **Uptime**: 99.9% availability with minimal planned downtime
- **Data Processing**: Real-time calculation updates for weighted scoring
- **Concurrent Users**: Support for 50+ simultaneous manager sessions

## Technical Integration Patterns

### Established Patterns

- Supabase client configuration with environment-based credentials
- TypeScript interfaces matching database schema for type safety (including app_config and weighted_evaluation_scores)
- Error handling with comprehensive try/catch patterns and user feedback
- Component architecture following React best practices with reusable UI elements
- Tailwind CSS utility classes for consistent styling and rapid development
- Configuration management through app_config table queries for runtime flexibility
- Webhook integration patterns for external service communication

### Development Guidelines

- Code organization following established project structure patterns
- Integration with existing design system and component library
- Consistent API patterns for Supabase data operations
- Error boundary implementation for graceful failure handling
- Performance optimization with React.memo and useMemo patterns
- Configuration service layer for app_config table access
- Webhook service implementation for n8n integration with proper error handling